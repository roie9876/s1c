# Example configuration for the Local Portal PoC
#
# Copy this file to: POC/LocalPortal/.env
#   cp POC/LocalPortal/.env.example POC/LocalPortal/.env
#
# IMPORTANT:
# - Do NOT commit your real POC/LocalPortal/.env
# - Replace all placeholder values below with your own.

# Flask session secret (used to sign cookies)
FLASK_SECRET_KEY="replace-with-a-long-random-string"

# --- Keycloak OIDC (Portal login) ---
# Example issuer (realm): https://idp.example.com/realms/s1c
KEYCLOAK_ISSUER_URL="https://idp.example.com/realms/s1c"

# OIDC client in Keycloak (example: localportal)
KEYCLOAK_CLIENT_ID="localportal"

# If the Keycloak client is confidential, set its secret; otherwise you can leave it blank.
KEYCLOAK_CLIENT_SECRET="replace-with-keycloak-client-secret-or-empty"

# Must match the redirect URI configured on the Keycloak client
KEYCLOAK_REDIRECT_URI="http://localhost:5001/auth/callback"

# Where to return after logout (optional)
KEYCLOAK_POST_LOGOUT_REDIRECT_URI="http://localhost:5001/login"

# --- Broker (Azure Function) ---
# Deployed Azure Function endpoint used by the portal to queue requests
AZURE_FUNCTION_URL="https://<your-function-app>.azurewebsites.net/api/queue_connection"

# --- AVD / Windows 365 web client launch ---
# Preferred: direct RemoteApp deep-link via workspace + remoteapp objectIds
AVD_DIRECT_REMOTEAPP_BASE_URL="https://windows.cloud.microsoft/webclient/avd"
AVD_WORKSPACE_OBJECT_ID="11111111-2222-3333-4444-555555555555"
AVD_REMOTEAPP_OBJECT_ID="aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"

# Optional fallback: generic AVD web client URL (used only if direct IDs above are not set)
AVD_LAUNCH_URL="https://client.wvd.microsoft.com/arm/webclient/index.html"

# --- Entra bootstrap (browser session warm-up) ---
# Tenant GUID (Directory ID)
ENTRA_TENANT_ID="99999999-8888-7777-6666-555555555555"

# App Registration used only to establish Microsoft session cookies
# Configure redirect URI: http://localhost:5001/entra/callback
ENTRA_BOOTSTRAP_CLIENT_ID="00000000-1111-2222-3333-444444444444"
ENTRA_BOOTSTRAP_REDIRECT_URI="http://localhost:5001/entra/callback"

# --- Optional user mapping ---
# Maps Keycloak portal user -> AVD UPN used as login_hint and as the /userId for queue items.
# Keep JSON on a single line.
# Example:
# PORTAL_TO_AVD_USER_MAP_JSON='{"cp1":"cp1@mydemodomain.org","cp2":"cp2@mydemodomain.org"}'
PORTAL_TO_AVD_USER_MAP_JSON='{}'
